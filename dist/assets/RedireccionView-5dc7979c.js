import{k as v,r as c,o as l,c as u}from"./index-b8a91fee.js";import{a as o}from"./axios-21b846bc.js";const k={key:0,class:"fixed top-0 left-0 flex items-center justify-center w-full h-full text-lg text-black bg-white z-5"},h={key:1,class:"fixed top-0 left-0 flex items-center justify-center w-full h-full text-lg text-black bg-white z-5"},S={__name:"RedireccionView",setup(_){const n=v(),d=c(p());function p(){const e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":"Desktop"}async function f(){try{const{data:e}=await o.get("https://ipapi.co/json/");return e.country_name||"unknown"}catch(e){return console.error("Error obteniendo el origin desde IPAPI:",e),"unknown"}}const r=c(!1);return(async()=>{const e="ultimaVezRegistrado_"+n.params.uuid,t=localStorage.getItem(e),s=new Date().getTime();try{const i={link_short:n.params.uuid},{data:a}=await o.post("https://api.mxclick.site/api/view/validate",i);if(a.length>0){if(t===null||s-t>24*60*60*1e3){const g=await f(),m={link_uuid:a[0].link_uuid,device:d.value,origin:g},{data:w}=await o.post("https://api.mxclick.site/api/view/logger",m);w.status==="OK"&&localStorage.setItem(e,s.toString())}window.location=a[0].link_real}else r.value=!0}catch(i){console.error(i)}})(),(e,t)=>r.value?(l(),u("div",k,"El link no existe")):(l(),u("div",h))}};export{S as default};
