import{k as v,r as c,o as w,c as k,m as _}from"./index-f65f9b8f.js";import{a as i}from"./axios-21b846bc.js";const f={key:0,class:"text-4xl font-bold text-center"},S={__name:"RedireccionView",setup(h){const n=v(),l=c(u());function u(){const e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":"Desktop"}async function d(){try{const{data:e}=await i.get("https://ipapi.co/json/");return e.country_name||"unknown"}catch(e){return console.error("Error obteniendo el origin desde IPAPI:",e),"unknown"}}const r=c(!1);return(async()=>{const e="ultimaVezRegistrado_"+n.params.uuid,t=localStorage.getItem(e),s=new Date().getTime();try{const o={link_short:n.params.uuid},{data:a}=await i.post("https://api.mxclick.site/api/view/validate",o);if(a.length>0){if(t===null||s-t>24*60*60*1e3){const p=await d(),m={link_uuid:a[0].link_uuid,device:l.value,origin:p},{data:g}=await i.post("https://api.mxclick.site/api/view/logger",m);g.status==="OK"&&localStorage.setItem(e,s.toString())}window.location=a[0].link_real}else r.value=!0}catch(o){console.error(o)}})(),(e,t)=>r.value?(w(),k("div",f,"El link no existe")):_("",!0)}};export{S as default};
